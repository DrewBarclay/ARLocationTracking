%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Masters/Doctoral Thesis 
% LaTeX Template
% Version 2.4 (22/11/16)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Version 2.x major modifications by:
% Vel (vel@latextemplates.com)
%
% This template is based on a template by:
% Steve Gunn (http://users.ecs.soton.ac.uk/srg/softwaretools/document/templates/)
% Sunil Patel (http://www.sunilpatel.co.uk/thesis-template/)
%
% Template license:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[
11pt, % The default document font size, options: 10pt, 11pt, 12pt
oneside, % Two side (alternating margins) for binding by default, uncomment to switch to one side
english, % ngerman for German
%singlespacing, % Single line spacing, alternatives: onehalfspacing or doublespacing
onehalfspacing, % Single line spacing, alternatives: onehalfspacing or doublespacing
%draft, % Uncomment to enable draft mode (no pictures, no links, overfull hboxes indicated)
nolistspacing, % If the document is onehalfspacing or doublespacing, uncomment this to set spacing in lists to single
%liststotoc, % Uncomment to add the list of figures/tables/etc to the table of contents
%toctotoc, % Uncomment to add the main table of contents to the table of contents
%parskip, % Uncomment to add space between paragraphs
%nohyperref, % Uncomment to not load the hyperref package
hidelinks, %To remove colored links
headsepline, % Uncomment to get a line under the header
%chapterinoneline, % Uncomment to place the chapter title next to the number on one line
consistentlayout, % Uncomment to change the layout of the declaration, abstract and acknowledgements pages to match the default layout
table, %for xcolor
]{MastersDoctoralThesis} % The class file specifying the document structure

\usepackage[utf8]{inputenc} % Required for inputting international characters
\usepackage[T1]{fontenc} % Output font encoding for international characters

\usepackage[titletoc]{appendix}

\usepackage{indentfirst}

\usepackage{palatino} % Use the Palatino font by default

\usepackage{textcomp} %copyright

\usepackage{listings} %for code highlighting

\usepackage{amsmath}

\usepackage{tikz}

\usepackage[backend=bibtex,style=ieee,natbib=true]{biblatex} % Use the bibtex backend with the authoryear citation style (which resembles APA)
\usepackage{xpatch}
 \usepackage{url}
 
 \usepackage{tabu}

\usepackage[]{siunitx} %for SI units

\usepackage{array} % for defining a new column type
\usepackage{varwidth} %for the varwidth minipage environment

\addbibresource{main.bib} % The filename of the bibliography

\usepackage[autostyle=true]{csquotes} % Required to generate language-dependent quotes in the bibliography

%\usepackage{color, colortbl} % For colored tables

\definecolor{Gray}{gray}{0.925}
\definecolor{Transparent}{gray}{1}

\lstset{
    frame=single,
    breaklines=true,
   % postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}}
}

%----------------------------------------------------------------------------------------
%	MARGIN SETTINGS
%----------------------------------------------------------------------------------------

\geometry{
	paper=a4paper, % Change to letterpaper for US letter
	%inner=2.5cm, % Inner margin
	%outer=3.8cm, % Outer margin
	bindingoffset=.5cm, % Binding offset
	left=1.5in,
	right=1in,
	top=0.75in, % Top margin
	bottom=0.75in, % Bottom margin
	%showframe, % Uncomment to show how the type block is set on the page
}

%----------------------------------------------------------------------------------------
%	THESIS INFORMATION
%----------------------------------------------------------------------------------------

\thesistitle{Augmented Reality with Location Tracking} % Your thesis title, this is used in the title and abstract, print it elsewhere with \ttitle
\supervisor{Dr. Robert McLeod \\ Dr. Ekram Hossain} % Your supervisor's name, this is used in the title page, print it elsewhere with \supname
\examiner{} % Your examiner's name, this is not currently used anywhere in the template, print it elsewhere with \examname
\degree{Bachelor of Science} % Your degree name, this is used in the title page and abstract, print it elsewhere with \degreename
\author{Drew Barclay \\ Maricar Aliasut \\ Llandro Ojeda} % Your name, this is used in the title page and abstract, print it elsewhere with \authorname
\addresses{} % Your address, this is not currently used anywhere in the template, print it elsewhere with \addressname

\subject{Biological Sciences} % Your subject area, this is not currently used anywhere in the template, print it elsewhere with \subjectname
\keywords{} % Keywords for your thesis, this is not currently used anywhere in the template, print it elsewhere with \keywordnames
\university{\href{http://umanitoba.ca/}{University of Manitoba}} % Your university's name and URL, this is used in the title page and abstract, print it elsewhere with \univname
\department{\href{http://umanitoba.ca/faculties/engineering/departments/ece/}{Electrical \& Computer Engineering}} % Your department's name and URL, this is used in the title page and abstract, print it elsewhere with \deptname
\group{Group 20} % Your research group's name and URL, this is used in the title page, print it elsewhere with \groupname
\faculty{\href{http://umanitoba.ca/faculties/engineering/index.html}{Faculty of Engineering}} % Your faculty's name and URL, this is used in the title page and abstract, print it elsewhere with \facname

\AtBeginDocument{
\hypersetup{pdftitle=\ttitle} % Set the PDF's title to your title
\hypersetup{pdfauthor=\authorname} % Set the PDF's author to your name
\hypersetup{pdfkeywords=\keywordnames} % Set the PDF's keywords to your keywords
%\hypersetup{colorlinks=false}
\hypersetup{hidelinks=true}
}

\begin{document}

\frontmatter % Use roman page numbering style (i, ii, iii, iv...) for the pre-content pages

\pagestyle{plain} % Default to the plain heading style until the thesis style is called for the body content

%----------------------------------------------------------------------------------------
% COMMANDS
%----------------------------------------------------------------------------------------

% Define some commands to keep the formatting separated from the content 
\newcommand{\keyword}[1]{\textbf{#1}}
\newcommand{\tabhead}[1]{\textbf{#1}}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\file}[1]{\texttt{\bfseries#1}}
\newcommand{\option}[1]{\texttt{\itshape#1}}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\begin{titlepage}
\begin{center}

\vspace*{.06\textheight}
%{\scshape\LARGE \univname\par}\vspace{1.5cm} % University name
\textsc{\Large Capstone Project Final Report}\\[0.5cm] % Thesis type

\HRule \\[0.4cm] % Horizontal line
{\huge \bfseries \ttitle\par}\vspace{0.4cm} % Thesis title
\HRule \\[1.5cm] % Horizontal line
 
\begin{minipage}[t]{0.4\textwidth}
\begin{flushleft} \large
\emph{Authors:}\\
{\authorname} % Author name - remove the \href bracket to remove the link
\end{flushleft}
\end{minipage}
\begin{minipage}[t]{0.4\textwidth}
\begin{flushright} \large
\emph{Advisors:} \\
{\supname} % Supervisor name - remove the \href bracket to remove the link  
\end{flushright}
\end{minipage}\\[3cm]
 
\vfill

\large \textit{Final report submitted in partial satisfaction of the requirements for the degree of \degreename}\\[0.3cm] % University requirement text
\textit{in}\\[0.4cm]
\deptname\\[0.4cm] % Research group name and department name
\textit{in the}\\[0.4cm]
\facname \\[0.4cm]
\textit{of the}\\[0.4cm]
\univname\\
 
\vspace*{\fill}

{\large Spring 2017}\\

{\small \textcopyright \, Copyright by Drew Barclay, Maricar Aliasut, Llandro Ojeda, 2017}\\
%{\large \today}\\[4cm] % Date
%\includegraphics{Logo} % University/department logo - uncomment to place it
 
\vfill
\end{center}
\end{titlepage}

%----------------------------------------------------------------------------------------
%	ABSTRACT PAGE
%----------------------------------------------------------------------------------------

\begin{abstract}
\addchaptertocentry{\abstractname} % Add the abstract to the table of contents

Virtual reality technology has lowering in cost and growing in popularity in recent years. This project uses a variant on virtual reality, augmented reality, to show the locations of tracked objects on an Android cellphone on top of images captured by the cellphone's camera.

The project shows where a tracked target is relative to the user (including if it is left, above, below, or the right), which would be useful in, for example, a military context for tracking the locations of fellow soldiers.

A proof of concept is presented which allows for accurate tracking in an in-door location. The system is composed of Decawave DW1000 ultra-wideband transceivers and Arduino Pro Mini microcontrollers forming a network of distance sensors, and Android cellphones running an augmented reality application created for the project. 

Distances between objects are determined via time-of-flight measurements between a number of devices in a network. Trigonometry allows these distances to be turned into positions in 3D space. OpenGL is used to render these images on the cellphone screen in real time.

The system allows for distance determinations accurate to within 50 centimeters. Positions rendered on the augmented reality display, after calibration, can be similarly accurate.

\end{abstract}

%----------------------------------------------------------------------------------------
%	ACKNOWLEDGEMENTS
%----------------------------------------------------------------------------------------

\begin{acknowledgements}
\addchaptertocentry{\acknowledgementname} % Add the acknowledgements to the table of contents
This project would not have been possible without a lot of people:

\begin{itemize}
	\item Our advisors, Dr. Ekram Hossain and Dr. Bob McLeod for taking us on despite having a risky project. Bob McLeod's generous financial support was a great help as well.
	\item Zoran Trajkoski, for helping us learn to solder (and for doing a lot of the soldering, saving us hours of time).
	\item Derek Oliver for allowing us to form a group of three, rather than the minimum of four normally required. 
	\item Aidan Topping for reading over the report and offering suggestions.
	\item Thomas ``thotro'' Trojer for his arduino-dw1000 project on Github, which allowed us to quickly determine whether we could do the project at all.
	\item Aleksandar ``d3alek'' Kodzhabashev and fractious for their work on the Texample2 3D text rendering library we used.
\end{itemize}

Thank you all.
\end{acknowledgements}

\begin{contributions}
\addchaptertocentry{\contributionsname} % Add the acknowledgements to the table of contents

There were three main facets to the technical side of the project: rangefinding, position calculation, and augmented reality. On the management side of the project, there were the oral and written reports, and the project proposal.

\begin{table}[ht]
\centering
\begin{tabular}{ l | c | c | c }
  \toprule
   \tabhead{Task} & \tabhead{Drew} & \tabhead{Maricar} & \tabhead{Llandro} \\
   \midrule
   \rowcolor{Gray}
  \tabhead{Research} & & & \\
  ~~Bluetooth Rangefinding & \textbullet & & \\
  ~~Google Cardboard & & \textbullet &  \\
  ~~DWM1000 and Arduino Code & & & \textbullet \\
  \midrule
  \rowcolor{Gray}
  \tabhead{Rangefinding} & & & \\
  ~~PCB Design & \textbullet & &  \\
  ~~Soldering & \textbullet & & \textbullet  \\
  ~~Software & \textbullet && \\
  \midrule
  \rowcolor{Gray}
  \tabhead{Position Calculation} & & & \\
  ~~Math & \textbullet & & \textbullet \\
  ~~Coding & \textbullet & & \\
  \midrule
  \rowcolor{Gray}
  \tabhead{Augmented Reality} & & & \\
  ~~Camera Capture & \textbullet & \textbullet & \textbullet \\
  ~~3D Graphics & \textbullet & & \\
  ~~Graphical Assets & & \textbullet & \\
  \midrule
  \rowcolor{Gray}
  \tabhead{Administration} & & & \\
  ~~Design Proposal (Oral) & & \textbullet  & \\
  ~~Design Proposal (Written) & \textbullet & \textbullet & \textbullet \\
  ~~Design Review 2 & & & \textbullet \\
  ~~Design Review 3 & \textbullet & & \\
  ~~Design Review 4 & \textbullet & & \\
  ~~Final Report & \textbullet & \textbullet & \textbullet \\
  ~~Final Presentation & \textbullet & \textbullet & \textbullet \\
  \bottomrule
  
\end{tabular}
\end{table}

\end{contributions}


%----------------------------------------------------------------------------------------
%	LIST OF CONTENTS/FIGURES/TABLES PAGES
%----------------------------------------------------------------------------------------

\tableofcontents % Prints the main table of contents

\listoffigures % Prints the list of figures

\listoftables % Prints the list of tables

%----------------------------------------------------------------------------------------
%	ABBREVIATIONS
%----------------------------------------------------------------------------------------

\addchap{\abbrevname}

\renewcommand\arraystretch{1.213}
\begin{longtable}{p{6cm} p{7cm}} 
\textbf{Anchor} & A stationary device used as a part of a network of similar devices to triangulate a user's location \\
\textbf{Augmented Reality} & A technology that overlays computer graphics on a user's view of the real world. \\
\textbf{Billboarding} & Technique used in 3D graphics to make an object face the camera\\
\textbf{Graphical User Interface (GUI)} & A visual interface which allows the user to interact with and know the state of a system \\
\textbf{Heads Up Display (HUD)} & A type of GUI which displays information to the user without the use of a dedicated screen\\
\textbf{Homogenous Coordinates} & An extension of coordinates which includes an extra component, $w$, which acts as a scaling factor on the other components of the coordinate\\
\textbf{Model Matrix} & A matrix used to transform the vertices of a 3D model from model space to world space. In equations, a model matrix usually uses the $\mathbf{M}$ symbol \\
\textbf{Model Space} & A coordinate system relative to the center of a 3D object\\
\textbf{Nodes} & Devices in a network, in this project either anchors or tags\\
\textbf{Normalized Device Coordinates (NDC)} & Coordinates transformed from world space to projection space and scaled such that all vertices of 3D objects visible to the camera will be contained within a cube from $(-1, -1, -1)$ to $(1, 1, 1)$\\
\textbf{OpenGL} & An API used to render 2D and 3D graphics\\
\textbf{Perspective Projection Matrix} & A type of projection matrix which mimics the human eye and will scale farther away objects so to they seem smaller\\
\textbf{Printed Circuit Board (PCB)} & A board with etched copper wires used in the construction of some electronics. \\
\textbf{Projection Matrix} & A matrix which can be used to transform coordinates in world space to projection space\\
\textbf{Projection Space} & A coordinate system relative to the center of the device's screen\\
\textbf{Rotation Matrix} & A transformation matrix which can rotate vectors a specified angle around any combination of axes, usually using the $\mathbf{R}$ symbol in equations\\
\textbf{Tag} & A mobile device, connected to the user's cellphone in this project, used as part of a network of similar devices to triangulate a user's location\\
\textbf{Time of Flight (TOF)} & A method used to calculate the distance between objects using the time it takes a signal to propagate between the objects\\
\textbf{Transformation Matrices} & Matrices that are used to transform vectors in 3D space, usually involving scaling, translation (movement in the space), and rotation\\
\textbf{Translation Matrix} & The transformation matrix which can be used to move a vector in space in a specified direction and distance\\
\textbf{Ultra-wideband (UWB)} & A type of radio technology useful in indoor ranging applications\\
\textbf{View Matrix} & A matrix used to transform coordinates in world space to view space\\
\textbf{View Space} & A coordinate system relative to the point at which the 3D scene is viewed from\\
\textbf{World Space} & A coordinate system relative to the 3D scene as a whole, similar to a coordinate system for the real world\\
\end{longtable}


%----------------------------------------------------------------------------------------
%	PHYSICAL CONSTANTS/OTHER DEFINITIONS
%----------------------------------------------------------------------------------------

%\begin{constants}{lr@{${}={}$}l} % The list of physical constants is a three column table
%
%% The \SI{}{} command is provided by the siunitx package, see its documentation for instructions on how to use it
%
%Speed of Light & $c_{0}$ & \SI{2.99792458e8}{\meter\per\second} (exact)\\
%%Constant Name & $Symbol$ & $Constant Value$ with units\\
%
%\end{constants}

%----------------------------------------------------------------------------------------
%	SYMBOLS
%----------------------------------------------------------------------------------------

%\begin{symbols}{lll} % Include a list of Symbols (a three column table)
%
%$a$ & distance & \si{\meter} \\
%$P$ & power & \si{\watt} (\si{\joule\per\second}) \\
%%Symbol & Name & Unit \\
%
%\addlinespace % Gap to separate the Roman symbols from the Greek
%
%$\omega$ & angular frequency & \si{\radian} \\
%
%\end{symbols}

%----------------------------------------------------------------------------------------
%	DEDICATION
%----------------------------------------------------------------------------------------

%\dedicatory{For/Dedicated to/To my\ldots} 

%----------------------------------------------------------------------------------------
%	THESIS CONTENT - CHAPTERS
%----------------------------------------------------------------------------------------

\mainmatter % Begin numeric (1,2,3...) page numbering

\pagestyle{thesis} % Return the page headers back to the "thesis" style

% Include the chapters of the thesis as separate files from the Chapters folder
% Uncomment the lines as you write the chapters

\include{Chapters/Introduction}
\include{Chapters/Rangefinding}
\include{Chapters/RangefindingHardware}
\include{Chapters/PositionCalculation}
\include{Chapters/AugmentedReality}
\include{Chapters/Budget}
\include{Chapters/Conclusion}

%----------------------------------------------------------------------------------------
%	THESIS CONTENT - APPENDICES
%----------------------------------------------------------------------------------------

%\appendix % Cue to tell LaTeX that the following "chapters" are Appendices

% Include the appendices of the thesis as separate files from the Appendices folder
% Uncomment the lines as you write the Appendices

\begin{appendices}
\input{Appendices/ArduinoCode}
\input{Appendices/AsyncProof}
\input{Appendices/BluetoothFailure}
\input{Appendices/RangefindingFrequencyAnalysis}
\input{Appendices/PositionCalculationProof}
%\include{Appendices/AppendixB}
%\include{Appendices/AppendixC}
\end{appendices}

%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\printbibliography[heading=bibintoc]

%----------------------------------------------------------------------------------------

\end{document}  
